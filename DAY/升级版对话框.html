<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			.con {
				width: 300px;
				height: 400px;
				border: 1px solid #000;
				margin: 40px auto;
			}
			
			.box {
				height: 320px;
				overflow: auto;
			}
			
			.box div {
				clear: both;
				max-width: 100px;
				padding: 5px;
				margin: 5px;
				border-radius: 5px;
			}
			
			.box div:nth-child(2n) {
				float: left;
				background: #FF9900;
			}
			
			.box div:nth-child(2n-1) {
				float: right;
				background: cornflowerblue;
			}
			
			.content {
				height: 79px;
				border-top: 1px solid #000;
				clear: both;
			}
			
			.txt {
				width: 249px;
				height: 100%;
				border: 0;
				font: 18px/20px '';
				float: left;
				border-right: 1px solid #000;
				resize: none;
			}
			
			.btn {
				width: 50px;
				height: 100%;
				border: 0;
				float: right;
				background: #999;
			}
		</style>
	</head>

	<body>
		<div class="con">
			<div class="box"></div>
			<div class="content">
				<textarea class="txt"></textarea>
				<input type="button" value="发送" class="btn" />
			</div>
		</div>
	</body>

</html>
<script type="text/javascript">
	var obtn = document.querySelector('.btn');
	var otxt = document.querySelector('.txt');
	var obox = document.querySelector('.box');

	var sum = 0;
	obtn.onclick = function() {
		send();
	}
	//键盘按下事件
	otxt.onkeydown = function(eve) {
		var e = eve || window.Element;
		if(e.keyCode == 13){
			send();
		}
	}
//  otxt.onkeydown=function(eve){
//  	var e = eve || window.Element;
//  	if(e.keyCode==13 && e.ctrlKey){
//  		send();
//  	}
//  }

	function send() {
		//把txt的值插入到box里
		//$('.box').innerHTML=$('.txt').value;
		//创建一个元素div
		var div = document.createElement('div');
		div.innerHTML = otxt.value;
		obox.appendChild(div);
		//让滚动条永远在底部，只显示最后发出的信息
		sum += div.offsetHeight + 10;
		obox.scrollTop = sum;
		otxt.value='';
		otxt.blur();
	}
</script>